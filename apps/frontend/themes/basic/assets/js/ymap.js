function Ymap(){function a(){ymaps.geocode(d,{results:1}).then(function(a){var d=a.geoObjects.get(0);b=new ymaps.Map("map",{center:d.geometry.getCoordinates(),zoom:17}),b.controls.add("zoomControl",{left:5,top:5}).add("typeSelector"),c=new ymaps.Placemark(d.geometry.getCoordinates(),{}),b.geoObjects.add(c)},function(a){console.log(a.message)})}var b,c,d=$("#map").data("address");ymaps.ready(a)}function LiveYmap(){function a(){(f.val()||f.html())&&"Выбрать"!=f.html()?g.blur():ymaps.geocode(ymaps.geolocation.city,{results:1}).then(function(a){var b=a.geoObjects.get(0);d=new ymaps.Map("liveYmap",{center:b.geometry.getCoordinates(),zoom:12}),d.controls.add("zoomControl",{left:5,top:5}).add("typeSelector")},function(a){alert(a.message)})}function b(){if(c!=this.value&&this.value){e.empty(),c=this.value;var b="";f.length>0&&(b=f.val()?f.val():f.html()),b+=" "+c,console.log(b),ymaps.geocode(b,{results:1}).then(function(b){var c,e=b.geoObjects.get(0);return e?(c=e.geometry.getCoordinates(),d=new ymaps.Map("liveYmap",{center:c,zoom:17}),d.controls.add("zoomControl",{left:5,top:5}).add("typeSelector"),myPlacemark=new ymaps.Placemark(e.geometry.getCoordinates(),{}),void d.geoObjects.add(myPlacemark)):void a()},function(a){alert(a.message)})}}var c,d,e=$("#liveYmap"),f=$("#"+e.data("city-tag")),g=$("#"+e.data("address-tag"));g.on("blur",b),ymaps.ready(a)}$(document).ready(function(){$("#liveYmap").length>0&&LiveYmap(),$("#map").length&&Ymap()});