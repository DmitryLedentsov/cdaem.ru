function Ymap(){var o,a,e=$("#map").data("address");ymaps.ready(function(){ymaps.geocode(e,{results:1}).then(function(e){var t=e.geoObjects.get(0);(o=new ymaps.Map("map",{center:t.geometry.getCoordinates(),zoom:17})).controls.add("zoomControl",{left:5,top:5}).add("typeSelector"),a=new ymaps.Placemark(t.geometry.getCoordinates(),{}),o.geoObjects.add(a)},function(e){console.log(e.message)})})}function LiveYmap(){var t,a,o=$("#liveYmap"),n=$("#"+o.data("city-tag")),e=$("#"+o.data("address-tag"));function m(){(n.val()||n.html())&&"Выбрать"!=n.html()?e.blur():ymaps.geocode(ymaps.geolocation.city,{results:1}).then(function(e){var t=e.geoObjects.get(0);(a=new ymaps.Map("liveYmap",{center:t.geometry.getCoordinates(),zoom:12})).controls.add("zoomControl",{left:5,top:5}).add("typeSelector")},function(e){alert(e.message)})}e.on("blur",function(){var e;t!=this.value&&this.value&&(o.empty(),t=this.value,e="",0<n.length&&(e=n.val()?n.val():n.html()),e+=" "+t,console.log(e),ymaps.geocode(e,{results:1}).then(function(e){var t,o=e.geoObjects.get(0);o?(t=o.geometry.getCoordinates(),(a=new ymaps.Map("liveYmap",{center:t,zoom:17})).controls.add("zoomControl",{left:5,top:5}).add("typeSelector"),myPlacemark=new ymaps.Placemark(o.geometry.getCoordinates(),{}),a.geoObjects.add(myPlacemark)):m()},function(e){alert(e.message)}))}),ymaps.ready(m)}$(document).ready(function(){0<$("#liveYmap").length&&LiveYmap(),$("#map").length&&Ymap()});