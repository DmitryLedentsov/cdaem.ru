var $targetSelectedAdvertModalTitle,$preloadFlag=!1,$serviceData={},$responseCache=null;function openWindowByService(e){$preloadFlag||($preloadFlag=!0,$("#services .service").not(e).removeClass("active"),e.toggleClass("active"),$serviceData.service=e.data("type"),$.get("/partners/ajax/realty-objects-by-service",{service:$serviceData.service},function(e){$("#modal-realty-objects-by-service").remove(),$("body").append(e),$("#modal-realty-objects-by-service").find(".advert-preview").removeClass("selected"),$("#modal-realty-objects-by-service").modal("show"),$targetSelectedAdvertModalTitle=$("#modal-realty-objects-by-service").data("title")}).complete(function(){$preloadFlag=!1}))}$(function(){$(document).on("click",".payments-method-logo",function(e){e.preventDefault();var t=$(this);$(".payments-method-logo").removeClass("active"),t.addClass("active"),$(".payment-service select[name='Pay[system]'] option[value='"+t.data("system")+"']").prop("selected",!0),t.parents(".payment-service").find('input[name="Pay[system]"]').val(t.data("system"))}),$(".payment-service select[name='Pay[system]']").change(function(){var e=$(this);$(".payments-method-logo").removeClass("active"),$('.payments-method-logo[data-system="'+e.val()+'"]').addClass("active")}),$(".settings-nav .settings").on("click",function(e){var t=$(this);$preloadFlag||($preloadFlag=!0,$.post("/office/ajax/social",{type:t.data("type"),interlocutor:t.data("interlocutor")},function(e){$.isPlainObject(e)&&"status"in e&&(1==e.status?(showStackInfo("Информация",e.message),window.location.reload()):showStackError("Ошибка",e.message))}).complete(function(){$preloadFlag=!1}))}),$(".delete-top-slider").on("click",function(e){if(!confirm("Подтверждение"))return!1;var t=$(this);$preloadFlag||($preloadFlag=!0,$.post("/office/ajax/delete-top-slider/"+t.data("advertisement_id"),function(e){$.isPlainObject(e)&&"status"in e&&(1==e.status?(showStackInfo("Информация",e.message),window.location.reload()):showStackError("Ошибка",e.message))}).complete(function(){$preloadFlag=!1}))}),$("#modal-realty-objects-by-service").on("hidden.bs.modal",function(){$("#services .service").removeClass("active")}),$("#services .service[data-type]").on("click, mouseup",function(e){var t=$(this);return $("#services").hasClass("min")?location.href="/office/services#"+t.data("type"):openWindowByService(t),!1});var e,t=window.location.hash.replace("#","");""==t||(e=$('#services .service[data-type="'+t+'"]')).length&&openWindowByService(e),$(document).on("click","#modal-realty-objects-by-service .advert-preview",function(e){e.preventDefault(),$(this).toggleClass("selected"),$serviceData.selected=[],$("#modal-realty-objects-by-service").find(".advert-preview.selected").each(function(e){$(this).data("advert")?$serviceData.selected.push($(this).data("advert")):$(this).data("apartment")&&$serviceData.selected.push($(this).data("apartment"))}),$("#selected-advert-count").html($serviceData.selected.length);var t=$("#selected-advert-info");0<$serviceData.selected.length?t.length||$("#modal-realty-objects-by-service").find(".load").append('<div class="text-center"><span class="btn btn-primary btn-special" id="selected-advert-info">Рассчитать стоимость</span></div>'):t.length&&t.parent().remove(),$responseCache=$("#modal-realty-objects-by-service").find(".load").html()}),$(document).on("click","#selected-advert-info",function(e){e.preventDefault();$(this);var t=$("#modal-realty-objects-by-service");$serviceData.days=$("#realty-objects-by-service-days").val(),$serviceData.date=$("#realty-objects-by-service-date").val(),$serviceData.request="calc",$preloadFlag||($preloadFlag=!0,$.post("/partners/ajax/buy-service",$serviceData,function(e){t.find(".load").html(e),t.find(".modal-title").html("Калькулятор"),t.find(".alert-danger").length||t.find(".load").append('<div class="text-center"><span class="btn btn-primary btn-special" id="selected-advert-ago">Назад</span> &nbsp; <span class="btn btn-orange btn-special" id="selected-advert-pay">Оплатить</span></div>')}).complete(function(){$preloadFlag=!1}))}),$(document).on("click","#selected-advert-ago",function(e){e.preventDefault();$(this);var t=$("#modal-realty-objects-by-service");t.find(".modal-title").html($targetSelectedAdvertModalTitle),t.find(".load").html($responseCache),refreshScripts(),$("#realty-objects-by-service-days").val($serviceData.days),$("#realty-objects-by-service-date").val($serviceData.date)}),$(document).on("click","#selected-advert-pay",function(e){e.preventDefault();$(this);var t=$("#modal-realty-objects-by-service");$serviceData.request="payment",$preloadFlag||($preloadFlag=!0,$.post("/partners/ajax/buy-service",$serviceData,function(e){t.find(".load").html(e),t.find(".modal-title").html("Оплата")}).complete(function(){$preloadFlag=!1}))}),$(document).on("change","#realty-objects-by-service-rent-type-list",function(){var e,t=$(this),a=t.parents(".office");a.find(".alert-warning").remove(),t.val()?(a.find(".item").hide(),(e=a.find('[data-rent-type="'+t.val()+'"]').parents(".item")).show(),e.length||a.find(".apartment-list").prepend('<div class="alert alert-warning">В данном типе аренды нет объектов.</div>')):a.find(".item").show()})}),$(window).scroll(function(){62<$(this).scrollTop()?$("#navigatio").addClass("fixed"):$(this).scrollTop()<62&&$("#navigatio").removeClass("fixed")}),$("#opendescription2").click(function(){$("#information-advert2").slideToggle("slow",function(){})});